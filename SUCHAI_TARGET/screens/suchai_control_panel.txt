SCREEN AUTO AUTO 1.0

TABBOOK
  TABITEM TM_STATUS
    TITLE "<%= @target_name %> Suchai Status Information"

    HORIZONTAL
      VERTICALBOX
        SECTIONHEADER "Gyroscope and Magnetometer status"

        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_ADS_ACC_X WITH_UNITS 20
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_ADS_ACC_Y WITH_UNITS 20
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_ADS_ACC_Z WITH_UNITS 20
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_ADS_MAG_X WITH_UNITS 20
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_ADS_MAG_Y WITH_UNITS 20
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_ADS_MAG_Z WITH_UNITS 20
      END

      VERTICALBOX
        SECTIONHEADER "Deployment status"

        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_OBC_OPMODE
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_OBC_SW_WDT
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_DEP_DEPLOYED
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_DEP_ANT_DEPLOYED
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_COM_FREQ
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_FPL_LAST
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_FPL_QUEUE
      END

      VERTICALBOX
        SECTIONHEADER "Battery Status"
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_EPS_VBATT WITH_UNITS 20
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_EPS_CUR_SYS WITH_UNITS 20
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_EPS_TEMP_BAT0 WITH_UNITS 20
        LABELVALUE SUCHAI_TARGET TM_STATUS DAT_EPS_CUR_SUN WITH_UNITS 20
      END
    END
    BUTTON "Update Status" 'system("ruby #{Cosmos::USERPATH}/tools/ScriptRunner #{Cosmos::USERPATH}/config/targets/SUCHAI_TARGET/procedures/update_status.rb")'
      LABELVALUE SUCHAI_TARGET TM_STATUS DAT_RTC_DATE_TIME WITH_UNITS 30
      SCREENSHOTBUTTON

  END

  TABITEM TEMP
    TITLE "Satellite Health and Status"
HORIZONTAL
    VERTICALBOX
      SECTIONHEADER "Sensors Temperatures"

      LABELVALUELIMITSBAR SUCHAI_TARGET TM_STATUS DAT_OBC_TEMP_1
      LABELVALUELIMITSBAR SUCHAI_TARGET TM_STATUS DAT_OBC_TEMP_2
      LABELVALUELIMITSBAR SUCHAI_TARGET TM_STATUS DAT_OBC_TEMP_3
      LABELVALUELIMITSBAR SUCHAI_TARGET TM_STATUS DAT_EPS_TEMP_BAT0
    END

    VERTICALBOX
                 SECTIONHEADER "Battery temperature data"
                 LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP1
                 LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP2
                 LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP3
                 LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP4
                 LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP5
                 LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP6
          END
END

      VERTICALBOX
       NAMED_WIDGET SCRIPTNAME COMBOBOX <%= Dir["#{Cosmos::USERPATH}/config/targets/SUCHAI_TARGET/procedures/temp_tab/*"].map {|x| File.basename(x) }.join(' ') %>
       BACKGROUNDBUTTON 'Run Script' 'script = ""; Qt.execute_in_main_thread { script = get_named_widget("SCRIPTNAME").text }; Cosmos.run_cosmos_tool("ScriptRunner", "-r #{script}")'
      END
       LABELVALUE SUCHAI_TARGET TM_STATUS DAT_RTC_DATE_TIME WITH_UNITS 30
       SCREENSHOTBUTTON

  END


  TABITEM ADS
   TITLE "Data collected by ADS sensors"
   HORIZONTAL
         VERTICALBOX
            SECTIONHEADER "Magnetometer and Gyroscope data"
            LABELVALUE SUCHAI_TARGET TM_PAYLOAD_ADS ACC_X
            LABELVALUE SUCHAI_TARGET TM_PAYLOAD_ADS ACC_Y
            LABELVALUE SUCHAI_TARGET TM_PAYLOAD_ADS ACC_Z
            LABELVALUE SUCHAI_TARGET TM_PAYLOAD_ADS MAG_X
            LABELVALUE SUCHAI_TARGET TM_PAYLOAD_ADS MAG_Y
            LABELVALUE SUCHAI_TARGET TM_PAYLOAD_ADS MAG_Z

            NAMED_WIDGET SCRIPTNAME COMBOBOX <%= Dir["#{Cosmos::USERPATH}/config/targets/SUCHAI_TARGET/procedures/ads_tab/*"].map {|x| File.basename(x) }.join(' ') %>
                 BACKGROUNDBUTTON 'Run Script' 'script = ""; Qt.execute_in_main_thread { script = get_named_widget("SCRIPTNAME").text }; Cosmos.run_cosmos_tool("ScriptRunner", "-r #{script}")'

         END


   TABBOOK
     TABITEM Magnetometer_Graphs
        HORIZONTAL
            LINEGRAPH SUCHAI_TARGET TM_PAYLOAD_ADS MAG_X 5 400 200
            LINEGRAPH SUCHAI_TARGET TM_PAYLOAD_ADS MAG_Y 5 400 200
        END
        HORIZONTAL
            LINEGRAPH SUCHAI_TARGET TM_PAYLOAD_ADS MAG_Z 5 400 200
        END
     END
     TABITEM Gyroscope_Graphs
        HORIZONTAL
            LINEGRAPH SUCHAI_TARGET TM_PAYLOAD_ADS ACC_X 5 400 200
            LINEGRAPH SUCHAI_TARGET TM_PAYLOAD_ADS ACC_Y 5 400 200
        END
        HORIZONTAL
            LINEGRAPH SUCHAI_TARGET TM_PAYLOAD_ADS ACC_Z 5 400 200
        END
     END
   END

  END






      LABELVALUE SUCHAI_TARGET TM_STATUS DAT_RTC_DATE_TIME WITH_UNITS 30

      SCREENSHOTBUTTON

   END

   TABITEM EPS
    TITLE "Data collected by EPS housekeeping"

    HORIZONTAL

      VERTICALBOX
             SECTIONHEADER "Battery status data"
             LABELVALUE SUCHAI_TARGET TM_PAYLOAD_EPS CURSUN
             LABELVALUE SUCHAI_TARGET TM_PAYLOAD_EPS CURSYS
             LABELVALUE SUCHAI_TARGET TM_PAYLOAD_EPS VBATT
      END
      VERTICALBOX
             SECTIONHEADER "Battery temperature data"
             LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP1
             LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP2
             LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP3
             LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP4
             LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP5
             LABELVALUELIMITSBAR SUCHAI_TARGET TM_PAYLOAD_EPS TEMP6
      END
    END

      VERTICALBOX
       NAMED_WIDGET SCRIPTNAME COMBOBOX <%= Dir["#{Cosmos::USERPATH}/config/targets/SUCHAI_TARGET/procedures/eps_tab/*"].map {|x| File.basename(x) }.join(' ') %>
       BACKGROUNDBUTTON 'Run Script' 'script = ""; Qt.execute_in_main_thread { script = get_named_widget("SCRIPTNAME").text }; Cosmos.run_cosmos_tool("ScriptRunner", "-r #{script}")'

      END
       LABELVALUE SUCHAI_TARGET TM_STATUS DAT_RTC_DATE_TIME WITH_UNITS 30
        SCREENSHOTBUTTON
   END

   TABITEM Graphs


      END
END


